language: python
python:
   - '3.6'
install:
  - pip install awscli cfn-lint
script:
- cfn-lint -f json *.yaml
- aws cloudformation validate-template --template-body file://chef_elasticsearch.yaml
- aws cloudformation validate-template --template-body file://chef_rds.yaml
- aws cloudformation validate-template --template-body file://automate.yaml
- aws cloudformation validate-template --template-body file://chef_server_ha.yaml
- aws cloudformation validate-template --template-body file://supermarket.yaml
deploy:
  provider: s3
  access_key_id:
    secure: oNPkZAaz4bJaXDZxYq/PrudDy7VGMok9pPpfO3B7au68ieOlFKZQr5e93hoH4/ekDspL7ZlquudLyh4pVvv3a6wvRLp7bOmyvfVBPWdzvMhuFGcUaKgft+YU5/xlVamR8tK9ntVOWY1wmJg3NJ1D+1MbxIG980uu4bKfm8BhbZhCDbTl5vH41YlF1c4YCWaFxVFHE5prDDIWIUR8iiTcQKbzVSmIPJOFzx/ym1FK3ipLcNE5aKuB0lWEGF87CWvAQAwMtqhJpxIG9HLjkAjZ/e9TGRkTpndQD3M0zT4XDgQIHUsEl/inVeMC0lIrndFabv9MOLsz7tGv9fNpugtOT/sSa2kYVAFWHYEes+Lk+6ilnpxhf+VsVY0Y59igAlsP0BJexy0Qo9LkxUe79vmlEWFVp0wnc0DC3EQdxlYugXjUqSRRQx3zOs6zSygUOvGnwJmrXlm0f+FkpKfr3jKPjlcuWNL+hKWVpQtBwAYmBLsVE5pi+454MDwhQs498og921qE0ujBV1/snVUu3KCUjsxWyRYYd1Q6QPhBh1ch3lApFelAjuFlXDnUCukwYmQjdZpmky2aLqngHsGyWN9WyCPVic6nAgR9lZpblr+yEEoqZKGwyq2owBl7U2mhmyOnZ+hxCBrunuTPhVenKSZCQ21rt2Yt0pgp71ICSU3AP4g=
  secret_access_key:
    secure: PWviiizhR1S7RcrCpWke2kw8hWjUbF63jtvE7G0JnwO8l1+D30LqYml2jyhcpZFzQlh3WludBajrb9XDaEzyhGNLa06FcwxilHIHbtOIRfsKT9i5YKq6kHwVI/7Vvewigd0joWoihcmK5QQSBtE1P/yOq6+qBPz6DOIhfImQHIYloaTd0fbeRw552pSviol/JmuJFMrUNDUzhwBqZ4Sz1UgY5z0y3sKTNKPY4HoEObb+vX+vdynd89WqwNP32NjmE2vPlalMFtcbrk+gXrc+arurv9XYyJ3sIHxRPdrVBnIc1ZcscOq1UVasbvcU+IPwssXM/xxKvfPhtlZCeg+TGxlqCrFKPVlf0k4ESqVNQX6DsR+8PmaAbHESfW3lLRQmuWCn0ZvmyaHfOWZWoq0FtJByvnarAaC672x3ZbNyyBzfhndv4qbb+struFjOCacjGa2JfCCeflu8FsqoRVm89hDoU5DQ+cQ58kDzA7g/Zb1cvxD7k3K/Wxdlre2B5EPhKxtbfZfdXB6JXdgZbI+oIDrCO9X9gGbKo4CsHQgZVSQ7JR4do9P4BRIvA2bxUUcMUxJ4h+ZSNYs8/eUFks6EYUqGRyIZ6UP3g8/tdmhGNjgW03lnB9HqX17rc1HLV1p1hy2KPL4t7FB/ydC4cd/Ct5jpn3x4TwOEm5GJ370XUCM=
  bucket: aws-native-chef-server
  acl: public_read
  on:
    branch: master
